cl_getres weap cl_setthing THING_PLAYER $userplayerid weapon
cl_getres cooldown cl_setthing THING_PLAYER $userplayerid cooldown
cl_testresn $cooldown null cl_getres dofire cl_lte $cooldown $gametimemillis
cl_testresn $cooldown null cl_testres $dofire 1 cl_addcom fireweapon $userplayerid $weap
cl_getaddlong refiretime $gametimemillis $1
cl_testresn $cooldown null cl_testres $dofire 1 cl_setthing THING_PLAYER $userplayerid cooldown $refiretime