testresn $gamemode $mode_virus exec scripts/handleplayerweapondrop $1
getres hadflag setnstate $1 flag
testres $hadflag 1 exec scripts/dropitem ITEM_FLAG $1
setnstate $1 flag 0
testresn $2 null getres kcolor setnstate $2 color
testresn $2 null getres kname setnstate $2 name
testresn $2 null getres kstr constr $kname # $kcolor
getres vvname setnstate $1 name
getres vvcolor setnstate $1 color
getres vvstr constr $vvname # $vvcolor
testresn $2 null testres $gamemode $mode_deathmatch givepoint $2
testresn $2 null getres kflag setnstate $2 flag
testresn $1 null getres k1flag setnstate $1 flag
testresn $2 null testres $gamemode $mode_vipmaster testres $kflag 1 givepoint $2
testresn $1 null testres $gamemode $mode_vipmaster testres $k1flag 1 givepoint $2
testres $gamemode $mode_virus getres wasvirus setnstate $1 virus
testres $gamemode $mode_virus setnstate $1 virus 1
testres $gamemode $mode_virus testres $wasvirus 0 echo $vvstr was infected
testresn $gamemode $mode_virus testres $2 null echo X $vvstr
testresn $gamemode $mode_virus testresn $2 null echo $kstr X $vvstr
