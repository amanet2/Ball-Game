REM get current weapon details
getres currweap setthing THING_PLAYER $2 weapon
getres dropdel setthing THING_PLAYER $2 dropweapondelay

REM if we have a weapon but not gloves check if we can switch weapons and get the ammo
setvar tryswap 0
setvar doswap 0
testresn $currweap 0 testresn $currweap $weap_gloves setvar tryswap 1
testres $tryswap 1 getres doswap gte $gametimemillis $dropdel
testres $doswap 1 exec scripts/handleplayerweapondrop $2
testres $doswap 1 setnplayer $2 weapon $weap_gloves
testres $doswap 1 setnplayer $2 ammo 0
testres $doswap 1 deleteitem $1

REM if we have no weapon at all give us the gloves
setvar setusup 0
testres $currweap 0 setvar setusup 1
testres $setusup 1 setnplayer $2 weapon $weap_gloves
testres $setusup 1 deleteitem $1